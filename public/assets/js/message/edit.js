webpackJsonp([8],{0:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}a(342),a(9),a(306),a(344),a(326);var s=a(309),i=n(s),o=a(347),u=n(o),f=a(348),d=n(f),r=$(".koala-message-edit-page"),c=r.find("#message_form"),l=new u["default"]({autofocus:!1,element:c.find('[name="content"]').get(0)});l.render(),c.find(".loading").fadeOut(),c.formValidation({autoFocus:!0,framework:"bootstrap",icon:{valid:!1,invalid:!1,validating:"fa fa-refresh"},row:{valid:"has-success"},fields:{title:{validators:{notEmpty:{message:"标题不能为空"}}}}}).on("success.form.fv",function(t){function e(t){t&&t.id?i["default"].alert({message:1===f.status?"消息发送成功~":"草稿保存成功~"}).then(function(){window.location.href="/messages/"+t.id}):i["default"].alert({message:1===f.status?"消息发送失败，请稍后再试~":"草稿保存失败，请稍后再试"})}function a(t){t&&t.message?i["default"].alert(t.message):i["default"].alert({message:1===f.status?"消息发送失败，请稍后再试~":"草稿保存失败，请稍后再试"})}t.preventDefault();var n=$(t.target),s=n.data("formValidation"),o=s.getSubmitButton(),u=o.data("action"),f=c.serializeObject();if(f.content=l.codemirror.getValue(),!f.content)return s.disableSubmitButtons(!1),i["default"].alert("内容不能为空~");f.status="send"===u?1:0;var m=r.find("#data_message_id").val();m?d["default"].update(m,f).then(function(t){e(t)})["catch"](function(t){a(t)}):d["default"].create(f).then(function(t){e(t)})["catch"](function(t){a(t)})})},342:function(t,e){},344:function(t,e,a){"use strict";a(345)},345:function(t,e){},347:function(t,e){t.exports=Editor}});