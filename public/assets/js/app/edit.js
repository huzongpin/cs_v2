webpackJsonp([4],{0:function(e,a,t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t(335),t(9),t(306);var n=t(309),o=i(n),s=t(331),r=i(s),d=$(".koala-app-edit-page"),l=d.find("#app_form"),u=new Editor({autofocus:!1,element:l.find('[name="content"]').get(0)});u.render(),l.find(".loading").fadeOut(),l.formValidation({autoFocus:!0,framework:"bootstrap",icon:{valid:!1,invalid:!1,validating:"fa fa-refresh"},row:{valid:"has-success"},fields:{client_id:{validators:{notEmpty:{message:"CLIENT_ID不能为空"}}},name:{validators:{notEmpty:{message:"应用名称不能为空"}}},homepage_url:{validators:{notEmpty:{message:"应用主页链接不能为空"},uri:{message:"应用主页链接必须为合法的URL"}}},logo_url:{validators:{notEmpty:{message:"应用Logo图片链接不能为空"},uri:{message:"应用Logo图片链接必须为合法的URL"}}},redirect_uri:{validators:{notEmpty:{message:"应用Oauth授权回调地址不能为空"},uri:{message:"应用Oauth授权回调地址必须为合法的URL"}}}}}).on("change",'[name="scopes"]',function(e){var a=$(this).val(),t=$(this).data("level"),i=$(this).prop("checked"),n=$(this).parents(".form-group"),o=!1;if(n.find('[name="scopes"][data-level="'+t+'"]').each(function(){if($(this).val()!=a&&$(this).prop("checked"))return o=!0,!1}),o)return!1;n.find('[name="scopes"]').each(function(){$(this).data("level")<t&&(i?$(this).prop("disabled",!0).prop("checked",!1):$(this).prop("disabled",!1).prop("checked",!1))});var s=l.data("formValidation");s.disableSubmitButtons(!1)}).on("change",'[name="status"]',function(e){var a=l.data("formValidation");a.disableSubmitButtons(!1)}).on("success.form.fv",function(e){e.preventDefault();var a=$(e.target),t=a.data("formValidation"),i=l.serializeObject();i.content=u.codemirror.getValue(),Array.isArray(i.scopes)&&(i.scopes=i.scopes.join(","));var n=d.find("#data_app_id").val();n?r["default"].update(n,i).then(function(e){e&&e.id?o["default"].alert({message:"应用保存成功~"}).then(function(){window.location.href="/apps/"+e.client_id}):(o["default"].alert("应用保存失败，请稍后再试~"),t.disableSubmitButtons(!1))})["catch"](function(e){e&&e.message?o["default"].alert(e.message):(o["default"].alert("应用保存失败，请稍后再试~"),t.disableSubmitButtons(!1))}):r["default"].create(i).then(function(e){e&&e.id?o["default"].alert({message:"应用创建成功~"}).then(function(){window.location.href="/apps/"+e.client_id}):o["default"].alert("应用创建失败，请稍后再试~")})["catch"](function(e){e&&e.message?o["default"].alert(e.message):o["default"].alert("应用创建失败，请稍后再试~")})})},335:function(e,a){}});