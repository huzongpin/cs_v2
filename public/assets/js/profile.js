webpackJsonp([11],{0:function(a,e,t){"use strict";function o(a){return a&&a.__esModule?a:{"default":a}}t(356),t(9),t(306),t(344);var i=t(326),n=o(i),r=t(312),s=o(r),l=t(329),u=(o(l),t(315)),d=(o(u),$(".koala-profile-page")),f=d.find("#profile_form");f.formValidation({autoFocus:!0,framework:"bootstrap",icon:{valid:!1,invalid:!1,validating:"fa fa-refresh"},err:{container:function(a){return a.parents(".form-group").find(".help-container")}},row:{valid:"has-success"},fields:{phone:{validators:{notEmpty:{message:"该字段不能为空"},phone:{country:"countrySelectBox",message:"格式不正确"}}},email:{validators:{notEmpty:{message:"该字段不能为空"},regexp:{regexp:"^[^@\\s]+@([^@\\s]+\\.)+[^@\\s]+$",message:"Email格式不正确"}}},workplace:{validators:{}},job:{validators:{}},grade:{validators:{digits:{message:"入学年份，如：2012"}}},major:{validators:{}},qq:{validators:{digits:{message:"只能包含数字"}}},wechat:{validators:{}},blog:{validators:{uri:{message:"必须为合法的URL"}}},github:{validators:{uri:{message:"必须为合法的URL"}}}}}).on("change",'[name="countrySelectBox"]',function(a){f.formValidation("revalidateField","phone")}).on("success.form.fv",function(a){a.preventDefault();var e=$(a.target),t=e.data("formValidation"),o=f.find("#user_id").val(),i=$("form").serializeObject();s["default"].update(o,i).then(function(a){a&&a.id?n["default"].alert({message:"信息更新成功~"}).then(function(){window.location.href="/users/"+a.id}):(n["default"].alert("信息保存失败，请稍后再试~"),t.disableSubmitButtons(!1))})["catch"](function(a){a&&a.message?n["default"].alert(a.message):(n["default"].alert("信息保存失败，请稍后再试~"),t.disableSubmitButtons(!1))})}),d.find("#update_profile").on("click",function(){f.submit()}),d.find("#btn_reset_password").on("click",function(a){a.preventDefault(),a.stopPropagation(),n["default"].confirm("目前只能通过邮件找回密码， 继续操作之前需要先退出系统。<br>是否继续？").then(function(){location.href="/oauth/logout"})["catch"](function(){})})},356:function(a,e){}});